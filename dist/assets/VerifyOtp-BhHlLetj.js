import{t as b,q as w,r as m,p as C,j as t,I as v,Q as R}from"./index-BhwuQh57.js";import{L as k}from"./Loader-BQUjsBGH.js";import{a as D,b as P}from"./DialogContent-D2H03b8v.js";import{B as n}from"./Box-CAmCZjMz.js";import{T as l}from"./Typography-Fw5DEFoH.js";import{T as L,e as S}from"./TextField-B86ZpcrU.js";import{a as T}from"./Button-DEpOL7wX.js";import"./Backdrop-B4RNuzOb.js";const K=({open:W,onClose:B,email:x})=>{const d=b(),c=w(),[r,p]=m.useState(new Array(4).fill("")),{registeredMail:h,isForgotPassword:a,isLoading:u}=C(o=>o.auth),i=r.map(()=>m.useRef(null)),g=(o,e)=>{const s=e.target.value;if(/^\d{1}$/.test(s)){const f=[...r];f[o]=s,p(f),o<3&&i[o+1].current.focus()}},j=(o,e)=>{if(o.key==="Backspace")if(r[e]==="")e>0&&i[e-1].current.focus();else{const s=[...r];s[e]="",p(s)}},y=()=>{const o=r.join(""),e={otp:parseInt(o),email:h,is_forgot_password:a?"1":"0"};d(R(e,c))};return t.jsxs(t.Fragment,{children:[t.jsx(D,{open:!0,fullWidth:!0,maxWidth:"xs",PaperProps:{sx:{borderRadius:4}},children:t.jsx(P,{children:t.jsxs(n,{textAlign:"",children:[t.jsx(l,{variant:"h6",sx:{fontWeight:"bold",mb:2},children:"Verify your email"}),t.jsxs(l,{variant:"body2",sx:{mb:3},children:["We sent a code to ",t.jsx("strong",{children:x})]}),t.jsx(n,{display:"flex",className:"otp-container",children:r.map((o,e)=>t.jsx(L,{value:o,onChange:s=>g(e,s),onKeyDown:s=>j(s,e),inputRef:i[e],inputProps:{maxLength:1,style:{textAlign:"center",fontSize:"24px"}},sx:{width:60,height:58,borderRadius:"8px","& input":{padding:"0",height:56,width:36},"& fieldset":{border:"1px solid #d1d1d1"},"&:focus-within fieldset":{borderColor:"red"}},type:"text"},e))}),t.jsx(n,{mt:2,children:t.jsxs(l,{variant:"body2",color:"textSecondary",children:["Didnâ€™t get a code?"," ",t.jsx(S,{sx:{cursor:"pointer"},onClick:()=>d(v({email:h,is_forgot_password:a||!1},c,null)),children:"Click to resend"})]})}),t.jsx(T,{fullWidth:!0,variant:"contained",sx:{backgroundColor:"red",color:"white",mt:4,borderRadius:2,padding:"10px 0"},disabled:r.join("").length!==4,onClick:y,children:"Continue"})]})})}),u&&t.jsx(k,{open:u})]})};export{K as default};
